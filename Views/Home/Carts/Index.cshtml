@model OnlineStoreMVC.Models.ViewModels.CartViewModel
@using OnlineStoreMVC.Models.ViewModels

@{
  Layout = "~/Views/Shared/_Layout.cshtml";
  ViewData["Title"] = "Giỏ hàng của bạn";
}

<h2>@ViewData["Title"]</h2>

@if (!Model.Items.Any())
{
  <p>Giỏ hàng trống.</p>
}
else
{
  <form asp-action="Update" method="post">
    <table class="table">
      <thead>
        <tr>
          <th>Sản phẩm</th>
          <th>Size</th>
          <th>Màu</th>
          <th class="text-end">Đơn giá</th>
          <th class="text-center">Số lượng</th>
          <th class="text-end">Thành tiền</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        @for (int i = 0; i < Model.Items.Count; i++)
        {
          var item = Model.Items[i];
          <tr>
            <td>
              <img src="@item.ImageUrl" style="width:60px;height:60px" />
              @item.ProductName
            </td>
            <td>@item.Size</td>
            <td>@item.Color</td>
            <td class="text-end">@item.UnitPrice:C0</td>
            <td class="text-center">
              <input type="hidden" name="items[@i].ProductID" value="@item.VariantID" />
              <input type="number" name="items[@i].Quantity" value="@item.Quantity" min="1"
                class="form-control text-center" />
            </td>
            <td class="text-end">@item.SubTotal:C0</td>
            <td class="text-center">
              <button type="button" class="btn btn-sm btn-outline-danger" onclick="this.closest('tr').remove()">
                ✕
              </button>
            </td>
          </tr>
        }
      </tbody>
      <tfoot>
        <tr>
          <th colspan="5" class="text-end">Tổng cộng:</th>
          <th class="text-end">@Model.Total:C0</th>
          <th></th>
        </tr>
      </tfoot>
    </table>

    <button type="submit" class="btn btn-secondary">Cập nhật giỏ hàng</button>
    <a asp-action="Checkout" class="btn btn-success">Tiến hành đặt hàng</a>
  </form>
}